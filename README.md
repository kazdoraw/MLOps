# MLOps HW1: ML Pipeline —Å DVC –∏ MLflow

[![GitHub](https://img.shields.io/badge/GitHub-MLOps-blue?logo=github)](https://github.com/kazdoraw/MLOps)
[![DVC](https://img.shields.io/badge/DVC-Data%20Version%20Control-945DD6?logo=dvc)](https://dvc.org)
[![MLflow](https://img.shields.io/badge/MLflow-Experiment%20Tracking-0194E2?logo=mlflow)](https://mlflow.org)

## üîó –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

**GitHub**: https://github.com/kazdoraw/MLOps.git

## –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

–°–æ–∑–¥–∞–Ω–∏–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ–≥–æ ML-pipeline –¥–ª—è **–±–∏–Ω–∞—Ä–Ω–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π**: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—á–Ω–æ–≥–æ –≤–∏–∑–∏—Ç–∞ –∫ –≤—Ä–∞—á—É –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞ –ø–∞—Ü–∏–µ–Ω—Ç-–≤—Ä–∞—á –∏–∑ –¥–∞—Ç–∞—Å–µ—Ç–∞ ChatDoctor.

### –ó–∞–¥–∞—á–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

- **–ö–ª–∞—Å—Å 0**: –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ—à–µ–Ω–∞ –æ–Ω–ª–∞–π–Ω
- **–ö–ª–∞—Å—Å 1**: –¢—Ä–µ–±—É–µ—Ç—Å—è –æ—Ñ–ª–∞–π–Ω-–≤–∏–∑–∏—Ç –∫ –≤—Ä–∞—á—É

–ú–µ—Ç–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª—é—á–µ–≤—ã—Ö —Ñ—Ä–∞–∑ –≤ –æ—Ç–≤–µ—Ç–∞—Ö –≤—Ä–∞—á–µ–π (visit, consult, emergency, etc.)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
HW1/
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ raw/              # –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ Kaggle (–≤–µ—Ä—Å–∏–æ–Ω–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ DVC)
‚îÇ   ‚îî‚îÄ‚îÄ processed/        # –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ train/test (–≤–µ—Ä—Å–∏–æ–Ω–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ DVC)
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ prepare.py        # –ü–∞—Ä—Å–∏–Ω–≥ JSON/CSV, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ—Ç–æ–∫, train/test split
‚îÇ   ‚îî‚îÄ‚îÄ train.py          # TF-IDF + RandomForest/LogisticRegression + MLflow
‚îú‚îÄ‚îÄ models/               # –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –∏ –≥—Ä–∞—Ñ–∏–∫–∏ (–≤–µ—Ä—Å–∏–æ–Ω–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ DVC)
‚îú‚îÄ‚îÄ dvc.yaml              # –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞–π–ø–ª–∞–π–Ω–∞ DVC (2 —Å—Ç–∞–¥–∏–∏)
‚îú‚îÄ‚îÄ params.yaml           # –ì–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥–µ–ª–∏ –∏ TF-IDF
‚îú‚îÄ‚îÄ requirements.txt      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îî‚îÄ‚îÄ README.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ GitHub

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/kazdoraw/MLOps.git
cd MLOps/HW1

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ DVC remote (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
dvc pull

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞–π–ø–ª–∞–π–Ω –æ–±—É—á–µ–Ω–∏—è
dvc repro

# –ó–∞–ø—É—Å—Ç–∏—Ç—å MLflow UI
mlflow ui --backend-store-uri sqlite:///mlflow.db
```

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: http://127.0.0.1:5000

### –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (Jupyter Notebook)

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ hw1.ipynb –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —è—á–µ–π–∫–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
jupyter notebook hw1.ipynb
```

–°–º. –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ **[QUICKSTART.md](QUICKSTART.md)**

## –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞–π–ø–ª–∞–π–Ω–∞

–ü–∞–π–ø–ª–∞–π–Ω —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ç–∞–¥–∏–π:

1. **prepare** (src/prepare.py):
   - –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞ ChatDoctor (JSON/CSV)
   - –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã: –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –∏ –≤—Ä–∞—á–µ–π
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ—Ç–æ–∫: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª—é—á–µ–≤—ã—Ö —Ñ—Ä–∞–∑
   - –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç–∞—Å–µ—Ç–∞: [text, label]
   - Train/test split (80/20) —Å–æ —Å—Ç—Ä–∞—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ data/processed/

2. **train** (src/train.py):
   - –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ Pipeline:
     * TfidfVectorizer (max_features=5000, ngrams=(1,2))
     * –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä (RandomForest –∏–ª–∏ LogisticRegression)
   - –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
   - –û—Ü–µ–Ω–∫–∞ –º–µ—Ç—Ä–∏–∫: accuracy, precision, recall, f1-score
   - –°–æ–∑–¥–∞–Ω–∏–µ confusion matrix
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤/–º–µ—Ç—Ä–∏–∫/–∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –≤ MLflow
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –≤ models/

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **DVC** - –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –ø–∞–π–ø–ª–∞–π–Ω–æ–≤
- **MLflow** - —Ç—Ä–µ–∫–∏–Ω–≥ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –∏ –º–æ–¥–µ–ª–µ–π
- **scikit-learn** - –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ
- **pandas** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

## MLflow UI

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `mlflow ui` –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
- http://127.0.0.1:5000

–í UI –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å:
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥–µ–ª–∏
- –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞
- –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (–º–æ–¥–µ–ª–∏, –≥—Ä–∞—Ñ–∏–∫–∏)
